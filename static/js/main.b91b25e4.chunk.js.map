{"version":3,"sources":["components/Footer.module.css","components/Chat.module.css","components/Messages.module.css","components/Message.module.css","components/Header.jsx","firebase.js","redux/store.js","components/Message.jsx","components/Messages.jsx","assets/img/mail.svg","components/Footer.jsx","components/Chat.jsx","components/Registr.jsx","App.jsx","index.js"],"names":["module","exports","Header","className","s","header","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","UPDATE_MESSAGES","initialState","messages","currentUser","id","userPhoto","store","createStore","state","action","type","window","Message","props","message","db","firestore","connect","updateMessages","console","log","useEffect","unsubscribe","collection","orderBy","onSnapshot","snapshot","forEach","doc","push","userId","data","map","m","messageLength","length","useState","inputValue","setInputValue","footer","onSubmit","e","preventDefault","add","then","submitForm","form","value","onChange","target","input","button","src","mailImg","alt","Chat","chat","Registr","isRedirect","setIsRedirect","email","setEmail","password","setPassword","a","auth","createUserWithEmailAndPassword","sendEmailVerification","catch","error","onAuthStateChanged","user","emailVerified","uid","to","regUser","placeholder","signInWithEmailAndPassword","logUser","App","exact","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b91b25e4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__324hG\",\"form\":\"Footer_form__WgY_f\",\"input\":\"Footer_input__3d9MR\",\"button\":\"Footer_button__2CRvI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat\":\"Chat_chat__x04Bp\",\"header\":\"Chat_header__1C0rL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messages\":\"Messages_messages__3RwPP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"Message_message__1vAGJ\"};","import s from \"./Chat.module.css\";\r\n\r\nconst Header = () => {\r\n    return(\r\n        <div className={s.header}>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Header;","import firebase from \"firebase/app\";\r\nimport \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyA3mE1pxhOx_PNYUXE2q1qLJFNRd9WlgS0\",\r\n    authDomain: \"chat-reac.firebaseapp.com\",\r\n    databaseURL: \"https://chat-reac-default-rtdb.firebaseio.com\",\r\n    projectId: \"chat-reac\",\r\n    storageBucket: \"chat-reac.appspot.com\",\r\n    messagingSenderId: \"808761910304\",\r\n    appId: \"1:808761910304:web:e2370427ffa838fe0bc845\"\r\n  };\r\n  // Initialize Firebase\r\n  firebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase;","import {createStore} from 'redux';\r\nconst UPDATE_MESSAGES = \"UPDATE-MESSAGES\";\r\n\r\nlet initialState = {\r\n    messages: [],\r\n    currentUser: {id: 2, userPhoto: \"\"},\r\n};\r\nlet messageReducer = (state = initialState, action) => {\r\n    switch(action.type){\r\n        case UPDATE_MESSAGES:\r\n            return {\r\n                ...state,\r\n                messages: [ ...action.messages ]\r\n            }\r\n\r\n        default: \r\n            return state;  \r\n    }\r\n}\r\n\r\nlet store = createStore(messageReducer);\r\n\r\nexport const updateMessages = (messages) =>{\r\n    return(\r\n        {type: UPDATE_MESSAGES, messages}\r\n    )\r\n};\r\n\r\nwindow.store = store;\r\nexport default store;","import s from \"./Message.module.css\"\r\nconst Message = (props) => {\r\n    return(\r\n        <div className={s.message}>\r\n            {props.message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Message;","import react, {useEffect} from \"react\";\r\nimport firebase from \"../firebase\";\r\nimport {connect} from \"react-redux\";\r\nimport {updateMessages} from \"../redux/store\";\r\nimport s from \"./Messages.module.css\";\r\nimport Message from \"./Message\";\r\nexport const db = firebase.firestore();\r\n\r\nconst Messages = (props) => {\r\n\r\n    console.log(props.messages);\r\n\r\n    useEffect( () => {\r\n      const unsubscribe = db.collection(\"messages\").orderBy(\"id\", \"asc\").onSnapshot(\r\n       function(snapshot) {\r\n         let messages = [];\r\n         snapshot.forEach( doc => messages.push({ userId: doc.data().userId, message: doc.data().message, id: doc.data().id}) )\r\n         props.updateMessages( messages )\r\n      });\r\n      return () => unsubscribe();\r\n    }, [])\r\n\r\n    return(\r\n       <div className={s.messages}>\r\n           {props.messages.map( (m) => <Message message = {m.message}/> )}\r\n       </div>\r\n    )\r\n}\r\nlet mapStateToProps = (state) => {\r\n    return{\r\n      messages: state.messages\r\n    }\r\n}\r\nexport default connect(mapStateToProps, {updateMessages})(Messages);","export default __webpack_public_path__ + \"static/media/mail.2abf58c6.svg\";","import react, {useState, useEffect} from \"react\";\r\nimport s from \"./Footer.module.css\";\r\nimport mailImg from \"../assets/img/mail.svg\";\r\nimport {db} from \"./Messages\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst Footer = (props) => {\r\n\r\n    const [inputValue, setInputValue] = useState(\"\");\r\n\r\n    let submitForm = (e, message) => {\r\n        e.preventDefault();\r\n        if(message) {\r\n            db.collection(\"messages\").add({\r\n                message,\r\n                id: props.messageLength,\r\n                userId: props.userId,\r\n            }).then( () => {\r\n                setInputValue(\"\")\r\n            } )\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className={s.footer}>\r\n            <form onSubmit={ (e) => submitForm(e, inputValue)} className={s.form}>\r\n                <input value={inputValue} onChange={ (e) => setInputValue(e.target.value) } className={s.input} type=\"text\"/>\r\n                <button className={s.button}>\r\n                    <img src={mailImg} alt=\"\"/>\r\n                </button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nlet mapStateToProps = (state) => (\r\n    {\r\n    messageLength: state.messages.length,\r\n    userId: state.currentUser.id\r\n    }\r\n\r\n)\r\nexport default connect(mapStateToProps)(Footer);","import Header from \"./Header\";\r\nimport Messages from \"./Messages\";\r\nimport Footer from \"./Footer\";\r\nimport s from \"./Chat.module.css\";\r\n\r\nconst Chat = () => {\r\n    return(\r\n        <div className={s.chat}>\r\n            <Header />\r\n            <Messages />\r\n            <Footer />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat;","import react, {useState, useEffect} from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport firebase from \"../firebase\";\r\nimport 'firebase/auth';\r\n\r\nconst Registr = () => {\r\n    const [isRedirect, setIsRedirect] = useState(false);\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n\r\n    useEffect( () => {\r\n        firebase.auth().onAuthStateChanged(function(user) {\r\n            if (user.emailVerified) {\r\n              console.log(\"user login\" + user.uid);\r\n              setIsRedirect(true)\r\n            } else {\r\n              console.log(\"user should verify email\");\r\n            }\r\n          });\r\n    }, [] )\r\n\r\n    async function regUser(e, email, password){\r\n        e.preventDefault();\r\n        try {\r\n            const data = await firebase.auth().createUserWithEmailAndPassword(email, password);\r\n            let user = firebase.auth().currentUser;\r\n            user.sendEmailVerification().then( () => {\r\n                console.log(\"emal sent\");\r\n            }).catch(function(error) {\r\n                console.log(\"bad\");\r\n            });\r\n        } catch (error) {\r\n            console.log(error.message)\r\n            throw error\r\n        }\r\n    }\r\n    let logUser = (e, email, password) => {\r\n        e.preventDefault();\r\n        firebase.auth().signInWithEmailAndPassword(email, password);\r\n    }\r\n    if(isRedirect) return <Redirect to=\"/chat\"/>\r\n    return(\r\n        <>\r\n        <form onSubmit={(e) => regUser(e, email, password)}>\r\n            <input type=\"text\" placeholder=\"Ваш e-mail\" value={email} onChange={ (e) => setEmail(e.target.value)}/>\r\n            <input type=\"password\" placeholder=\"Ваш пароль\" value={password} onChange={ (e) => setPassword(e.target.value)}/>\r\n            <button>Зарегестрироваться</button>\r\n        </form>\r\n\r\n        <form onSubmit={(e) => logUser(e, email, password)}>\r\n            <input type=\"text\" placeholder=\"Ваш e-mail\" value={email} onChange={ (e) => setEmail(e.target.value)}/>\r\n            <input type=\"password\" placeholder=\"Ваш пароль\" value={password} onChange={ (e) => setPassword(e.target.value)}/>\r\n            <button>Войти</button>\r\n        </form>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Registr;","import Chat from \"./components/Chat\";\nimport Registr from \"./components/Registr\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport firebase from \"./firebase\";\nimport \"firebase/auth\";\n\nconst App = (props) => {\n  return (\n    <div className=\"App\">\n      <Route exact path=\"/\" component={Registr}/>\n      <Route path=\"/chat\" component={Chat}/>\n    </div> \n  );\n}\nexport default (App);\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {Provider} from \"react-redux\";\nimport store from './redux/store';\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}